if (self.CavalryLogger) { CavalryLogger.start_js(["zMHR2"]); }

__d("LEDExperimentEntryPoint",[],(function a(b,c,d,e,f,g){f.exports={LIKE:"like",ATTACHMENT:"attachment",NETEGO:"netego"};}),null);
__d("PageContextualRecommendationsTrigger",[],(function a(b,c,d,e,f,g){f.exports={DEBUG:"debug",FANNING:"fanning",NONE:"none",UFI:"ufi"};}),null);
__d("XEventRelatedEventsPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/events\/async\/related_events_pivot\/",{event_id:{type:"Int",required:true},attachment_id:{type:"String"},trigger_action:{type:"String"}});}),null);
__d("XFeedAdsChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/feed\/ads_chaining\/",{actor_id:{type:"String",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}});}),null);
__d("XLEDFollowUpFeedUnitController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/led\/async\/follow_up_feed_unit\/",{ft_id:{type:"String"},story_id:{type:"String"},place_id:{type:"String"},entry_point:{type:"Enum",required:true,enumType:1}});}),null);
__d("XPubcontentCommerceProductChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/related_product\/",{attachment_id:{type:"String",required:true},product_id:{type:"Int",required:true}});}),null);
__d("XPubcontentFeedChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/feed_chaining\/",{actor_id:{type:"String",required:true},content_id:{type:"String"},ft_id:{type:"String"},origin:{type:"String",required:true},is_home_request:{type:"Bool",defaultValue:false},trigger:{type:"String"},referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:false}});}),null);
__d("XPubcontentFeedCommentChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/comment_chaining\/",{action_trigger:{type:"String",required:true},ft_id:{type:"String"}});}),null);
__d("XPubcontentGroupRelatedStoriesChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/group_related_stories\/",{post_id:{type:"Int",required:true},is_home_request:{type:"Bool",defaultValue:false}});}),null);
__d("XPubcontentInlineStoryPivotChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/inline_story_pivot_chaining\/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}});}),null);
__d("XPubcontentPoliticalIssueChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/political_issue_chaining\/",{ft_id:{type:"String",required:true}});}),null);
__d("XPubcontentRelatedShareChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/related_share\/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"},is_auto_expand:{type:"Bool",defaultValue:false}});}),null);
__d("XPubcontentRelatedVideoChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/related_video\/",{attachment_div_id:{type:"String",required:true},fbvideo_id:{type:"Int",required:true},qid:{type:"String"},mf_story_key:{type:"String"}});}),null);
__d("XPubcontentTopicChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/topic_chaining\/",{ft_id:{type:"String",required:true}});}),null);
__d("XRelatedGamesChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/games\/async\/related_games\/",{attachment_div_id:{type:"String",required:true},app_id:{type:"Int",required:true}});}),null);
__d("XSearchRelatedPostsPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/search\/async\/related_posts_pivot\/",{origin:{type:"String",required:true},content_id:{type:"String",required:true}});}),null);
__d('PubcontentFeedChainingControllerX',['csx','cx','AggregatedLinkComposerConfig','Arbiter','AsyncRequest','AttachmentIssueDiversityShareConstants','AttachmentRelatedShareConstants','ContextualThing','CSS','DataAttributeUtils','DOM','DOMQuery','FeedAdsChainingConfig','NavigationMessage','PageLikeConstants','Parent','PubcontentFeedChainingConfig','ContextualRecommendationsFeedChainingConfig','PubcontentRelatedShareChainingConfig','PubcontentPoliticalIssueChainingConfig','PubcontentTopicChainingConfig','RelatedEventsPivotChainingConfig','Run','SearchRelatedPostsPivotChainingConfig','StoryInlinePivotChainingConfig','SubscriptionsHandler','UFIFeedbackTargets','UFIUIEvents','URI','VideoChannelViewVariables','XEventRelatedEventsPivotController','XPubcontentCommerceProductChainingController','XFeedAdsChainingController','XPubcontentFeedChainingController','XPubcontentInlineStoryPivotChainingController','XPubcontentPoliticalIssueChainingController','XPubcontentRelatedShareChainingController','XPubcontentRelatedVideoChainingController','XPubcontentTopicChainingController','XPubcontentFeedCommentChainingController','XRelatedGamesChainingController','XSearchRelatedPostsPivotController','XPubcontentGroupRelatedStoriesChainingController','XLEDFollowUpFeedUnitController','LEDExperimentEntryPoint','PageContextualRecommendationsTrigger','cxodecode','getOrCreateDOMID'],(function a(b,c,d,e,f,g,h,i){'use strict';var j='ei',k='ad_fan_page_action',l='ad_like_page_post_action',m='page_story_like_action',n='political_issue_story_article_click_action',o='related_share_article_click',p='related_product_click',q='related_share_video_click',r='related_share_video_view',s='page_share_like_action',t='topic_story_like_action',u='story_click_for_pivot_action',v='story_like_pivot_action',w='event_join',x='composer_publish_action',y='place_checkin_story_action',z='LIKE',aa='COMMENT',ba=c('VideoChannelViewVariables').channelPivots,ca="._5v9_",da=null,ea=false,fa=null,ga=null;ha.init=function(la){var ma=la.isLazy,na=la.srs,oa=la.sdrs;if(na&&oa){fa=c('cxodecode')(na);ga=c('cxodecode')(oa);}if(!da)da=new ha({isLazy:ma});if(!ea){c('Run').onLeave(ha.cleanup);c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,ha.cleanup);ea=true;}};ha.cleanup=function(){if(da){da.cleanup();da=null;}};function ha(la){var ma=la.isLazy;this.$PubcontentFeedChainingControllerX1=c('PubcontentFeedChainingConfig');this.$PubcontentFeedChainingControllerX2=c('ContextualRecommendationsFeedChainingConfig');this.$PubcontentFeedChainingControllerX3=c('FeedAdsChainingConfig');this.$PubcontentFeedChainingControllerX4=c('PubcontentRelatedShareChainingConfig');this.$PubcontentFeedChainingControllerX5=c('PubcontentTopicChainingConfig');this.$PubcontentFeedChainingControllerX6=c('PubcontentPoliticalIssueChainingConfig');this.$PubcontentFeedChainingControllerX7=c('StoryInlinePivotChainingConfig');this.$PubcontentFeedChainingControllerX8=c('RelatedEventsPivotChainingConfig');this.$PubcontentFeedChainingControllerX9=c('SearchRelatedPostsPivotChainingConfig');this.$PubcontentFeedChainingControllerX10={};this.$PubcontentFeedChainingControllerX11=new (c('SubscriptionsHandler'))();this.$PubcontentFeedChainingControllerX11.addSubscriptions(this.$PubcontentFeedChainingControllerX12(c('PageLikeConstants').LIKED,ma,this.$PubcontentFeedChainingControllerX13.bind(this)),this.$PubcontentFeedChainingControllerX12(c('UFIUIEvents').ActionLinkLike,ma,this.$PubcontentFeedChainingControllerX14.bind(this)),this.$PubcontentFeedChainingControllerX12(c('UFIUIEvents').ReactionButtonClicked,ma,this.$PubcontentFeedChainingControllerX14.bind(this)),this.$PubcontentFeedChainingControllerX12(c('UFIUIEvents').Comment,ma,this.$PubcontentFeedChainingControllerX15.bind(this)),this.$PubcontentFeedChainingControllerX12('composer/publish',ma,this.$PubcontentFeedChainingControllerX16.bind(this)),this.$PubcontentFeedChainingControllerX12('LitestandComposer/publish',ma,this.$PubcontentFeedChainingControllerX16.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,ma,this.$PubcontentFeedChainingControllerX17.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentIssueDiversityShareConstants').ARTICLE_CLICK,ma,this.$PubcontentFeedChainingControllerX18.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').VIDEO_CLICK,ma,this.$PubcontentFeedChainingControllerX19(this.$PubcontentFeedChainingControllerX20.bind(this),c('LEDExperimentEntryPoint').ATTACHMENT)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').FBVIDEO_VIEW,ma,this.$PubcontentFeedChainingControllerX19(this.$PubcontentFeedChainingControllerX21.bind(this),c('LEDExperimentEntryPoint').ATTACHMENT)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').FBVIDEO_CLICK,ma,this.$PubcontentFeedChainingControllerX19(this.$PubcontentFeedChainingControllerX21.bind(this),c('LEDExperimentEntryPoint').ATTACHMENT)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').GAME_CLICK,ma,this.$PubcontentFeedChainingControllerX22.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').PHOTO_CLICK,ma,this.$PubcontentFeedChainingControllerX19(this.$PubcontentFeedChainingControllerX23.bind(this),c('LEDExperimentEntryPoint').ATTACHMENT)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').EVENT_JOIN,ma,this.$PubcontentFeedChainingControllerX24.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').PRODUCT_CLICK,ma,this.$PubcontentFeedChainingControllerX25.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').MAP_CLICK,ma,this.$PubcontentFeedChainingControllerX26.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').ACTION_BUTTON_CLICK,ma,this.$PubcontentFeedChainingControllerX27.bind(this)));}ha.prototype.$PubcontentFeedChainingControllerX12=function(event,la,ma){var na=la?[event,event+'.lazy']:[event];return c('Arbiter').subscribe(na,ma);};ha.prototype.cleanup=function(){this.$PubcontentFeedChainingControllerX11&&this.$PubcontentFeedChainingControllerX11.release();this.$PubcontentFeedChainingControllerX11=null;};ha.getAdClientTokenIndex=function(){return j;};ha.prototype.$PubcontentFeedChainingControllerX13=function(la,ma){var na=this.findAdClientToken(ma.target);if(na){this.$PubcontentFeedChainingControllerX28(ma.target,{origin:k,actor_id:ma.profile_id,client_token:na});}else this.$PubcontentFeedChainingControllerX29(ma.target,{origin:ma.origin,actor_id:ma.profile_id,trigger:c('PageContextualRecommendationsTrigger').FANNING,chaining_type:'contextual_recommendations'});};ha.prototype.$PubcontentFeedChainingControllerX14=function(la,ma){if(!ma.ft_id||!ma.target||!ma.reaction_type)return;if(!this.$PubcontentFeedChainingControllerX30(this.findStory(ma.target))||this.$PubcontentFeedChainingControllerX31(this.findStory(ma.target)))return;c('UFIFeedbackTargets').getFeedbackTarget(ma.ft_id,function(na,oa){var pa=this.findAdClientToken(na);if(pa&&oa.isshare){this.$PubcontentFeedChainingControllerX28(na,{actor_id:oa.actorid,origin:l,ft_id:oa.entidentifier,client_token:pa});}else if(oa.isownerpage){var qa=oa.isshare?s:m;this.$PubcontentFeedChainingControllerX29(na,{actor_id:oa.actorid,content_id:oa.entidentifier,ft_id:oa.entidentifier,origin:qa,trigger:c('PageContextualRecommendationsTrigger').UFI,chaining_type:'contextual_recommendations'});}else if(oa.grouporeventid){if(this.shouldPuntGroupChaining(na))return;this.$PubcontentFeedChainingControllerX32(na,{post_id:oa.entidentifier,origin:z});}else if(oa.isshare){this.$PubcontentFeedChainingControllerX29(na,{actor_id:oa.actorid,content_id:oa.entidentifier,ft_id:oa.entidentifier,origin:s,trigger:c('PageContextualRecommendationsTrigger').UFI,chaining_type:'contextual_recommendations'});}else if(oa.isplacecheckin){this.$PubcontentFeedChainingControllerX33(na,{ft_id:oa.entidentifier,origin:y},c('LEDExperimentEntryPoint').LIKE);}else{var ra=this.$PubcontentFeedChainingControllerX34(na,{origin:v,ft_id:oa.entidentifier});if(!ra)this.$PubcontentFeedChainingControllerX35(na,{origin:t,ft_id:oa.entidentifier});}}.bind(this,ma.target));};ha.prototype.$PubcontentFeedChainingControllerX15=function(la,ma){if(!ma.ft_id||!ma.target)return;if(!this.$PubcontentFeedChainingControllerX30(this.findStory(ma.target))||this.$PubcontentFeedChainingControllerX31(this.findStory(ma.target)))return;c('UFIFeedbackTargets').getFeedbackTarget(ma.ft_id,function(na,oa){if(oa.grouporeventid){if(this.shouldPuntGroupChaining(na))return;this.$PubcontentFeedChainingControllerX36(na,{origin:aa,event_id:oa.grouporeventid});}else this.$PubcontentFeedChainingControllerX37(ma.target,{origin:o,action_trigger:aa,ft_id:oa.entidentifier});}.bind(this,ma.target));};ha.prototype.$PubcontentFeedChainingControllerX34=function(la,ma){var na=this.$PubcontentFeedChainingControllerX38(la,ma);if(!na)return false;var oa=c('XPubcontentInlineStoryPivotChainingController').getURIBuilder().setString('origin',ma.origin);if(ma.story_id)oa.setString('storyid',String(ma.story_id));if(ma.ft_id)oa.setString('ftid',String(ma.ft_id));new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,na.story.id)).setRelativeTo(na.chainingWrapper).setURI(oa.getURI()).setAllowCrossPageTransition(true).send();return true;};ha.prototype.$PubcontentFeedChainingControllerX35=function(la,ma){var na=this.$PubcontentFeedChainingControllerX38(la,ma);if(!na||!this.$PubcontentFeedChainingControllerX40())return;var oa=c('XPubcontentTopicChainingController').getURIBuilder().setString('ft_id',ma.ft_id);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,na.story.id)).setRelativeTo(na.chainingWrapper).setURI(oa.getURI()).setAllowCrossPageTransition(true).send();return;};ha.prototype.$PubcontentFeedChainingControllerX41=function(la,ma,na){var oa=ma.ft_id;if(!oa){na&&na();return;}var pa=this.findStory(la);if(ja(pa)||ka(pa)){na&&na();return;}var qa=this.$PubcontentFeedChainingControllerX38(la,ma);if(!qa){na&&na();return;}var ra=c('XPubcontentPoliticalIssueChainingController').getURIBuilder().setString('ft_id',oa);new (c('AsyncRequest'))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX39(qa.story.id);na&&na();}.bind(this)).setRelativeTo(qa.chainingWrapper).setURI(ra.getURI()).setAllowCrossPageTransition(true).setHandler(function(sa){if(!sa.payload.is_chained){this.$PubcontentFeedChainingControllerX39(qa.story.id);na&&na();}}.bind(this)).send();return;};ha.prototype.$PubcontentFeedChainingControllerX23=function(la,ma){var na=this;na.$PubcontentFeedChainingControllerX34(ma.attachment,{origin:u,story_id:ma.storyid});};ha.prototype.$PubcontentFeedChainingControllerX17=function(la,ma){this.$PubcontentFeedChainingControllerX42(la,ma,true);};ha.prototype.$PubcontentFeedChainingControllerX18=function(la,ma){this.$PubcontentFeedChainingControllerX42(la,ma,false);};ha.prototype.$PubcontentFeedChainingControllerX42=function(la,ma,na){if(c('AggregatedLinkComposerConfig').no_chained_related_stories==='true')return;var oa=this,pa=this.findStory(ma.attachment),qa=c('DOMQuery').scry(c('DOMQuery').getRootElement(),'#initial_browse_result').length>0;if(qa)return;var ra;if(ma.is_right_click){ra=0;}else ra=c('AttachmentRelatedShareConstants').EVENT_DELAY;setTimeout(function(){if(pa){var sa=oa.findAttachment(pa);if(sa)ma.attachment=sa;}ma.ft_id=oa.findFeedbackTargetId(pa);oa.$PubcontentFeedChainingControllerX41(ma.attachment,{origin:n,ft_id:ma.ft_id},function(){if(!na)return;ma.origin=o;oa.$PubcontentFeedChainingControllerX43(ma.attachment,ma);});},ra);};ha.prototype.$PubcontentFeedChainingControllerX20=function(la,ma){if(!this.$PubcontentFeedChainingControllerX40())return;ma.origin=q;var na=this,oa=this.findStory(ma.attachment);setTimeout(function(){if(oa){var pa=na.findAttachment(oa);if(pa)ma.attachment=pa;}na.$PubcontentFeedChainingControllerX43(ma.attachment,ma);},c('AttachmentRelatedShareConstants').EVENT_DELAY);};ha.prototype.$PubcontentFeedChainingControllerX21=function(la,ma){if(!this.$PubcontentFeedChainingControllerX40())return;ma.origin=la.indexOf(c('AttachmentRelatedShareConstants').FBVIDEO_VIEW)===-1?q:r;var na=this,oa=this.findStory(ma.attachment);setTimeout(function(){if(oa){var pa=na.findAttachment(oa);if(pa)ma.attachment=pa;}na.$PubcontentFeedChainingControllerX43(ma.attachment,ma);},c('AttachmentRelatedShareConstants').EVENT_DELAY);};ha.prototype.$PubcontentFeedChainingControllerX22=function(la,ma){var na=this,oa=this.findStory(ma.attachment);setTimeout(function(){if(oa)var pa=na.findContainer(oa);na.$PubcontentFeedChainingControllerX44(oa,ma.global_share_id,c('getOrCreateDOMID')(pa));},c('AttachmentRelatedShareConstants').EVENT_DELAY);};ha.prototype.$PubcontentFeedChainingControllerX24=function(la,ma){var na=this.findStory(ma.attachment);if(na){var oa=this.findAttachment(na);if(oa)ma.attachment=oa;}this.$PubcontentFeedChainingControllerX36(ma.attachment,{origin:w,event_id:ma.event_id});};ha.prototype.$PubcontentFeedChainingControllerX25=function(la,ma){ma.origin=p;var na=this.findStory(ma.attachment);if(na){var oa=this.findAttachment(na);if(oa)ma.attachment=oa;}this.$PubcontentFeedChainingControllerX45(ma.attachment,ma);};ha.prototype.$PubcontentFeedChainingControllerX26=function(la,ma){this.$PubcontentFeedChainingControllerX33(ma.attachment,{place_id:ma.place_id,story_id:ma.story_id,origin:y},c('LEDExperimentEntryPoint').ATTACHMENT);};ha.prototype.$PubcontentFeedChainingControllerX27=function(la,ma){var na=this.findStory(ma.button);if(!na)return;this.$PubcontentFeedChainingControllerX33(na,{place_id:ma.place_id,origin:y},c('LEDExperimentEntryPoint').ATTACHMENT);};ha.prototype.$PubcontentFeedChainingControllerX16=function(la,ma){var na=this;setTimeout(function(){na.$PubcontentFeedChainingControllerX46(ma.markup.firstChild,{origin:x,content_id:ma.content_id});},this.$PubcontentFeedChainingControllerX9.composer_publish_action);};ha.prototype.$PubcontentFeedChainingControllerX47=function(la){return !!(la&&la.id&&!c('CSS').matchesSelector(la,"._sf6")&&!(la.id in this.$PubcontentFeedChainingControllerX10));};ha.prototype.$PubcontentFeedChainingControllerX48=function(la){if(!la)return false;if(la.origin in this.$PubcontentFeedChainingControllerX1||la.origin in this.$PubcontentFeedChainingControllerX2||la.origin in this.$PubcontentFeedChainingControllerX4||la.origin in this.$PubcontentFeedChainingControllerX3||la.origin in this.$PubcontentFeedChainingControllerX7||la.origin in this.$PubcontentFeedChainingControllerX8||la.origin in this.$PubcontentFeedChainingControllerX9||la.origin in this.$PubcontentFeedChainingControllerX5||la.origin in this.$PubcontentFeedChainingControllerX6||la.origin===p||la.origin===r||la.origin===y||la.origin===z||la.origin===aa)return true;return false;};ha.prototype.$PubcontentFeedChainingControllerX49=function(la){this.$PubcontentFeedChainingControllerX10[la]=true;};ha.prototype.$PubcontentFeedChainingControllerX39=function(la){delete this.$PubcontentFeedChainingControllerX10[la];};ha.prototype.$PubcontentFeedChainingControllerX30=function(la){if(!la)return false;var ma="_3lkn",na=la.nextSibling,oa=true;if(na&&na.firstChild){var pa=na.firstChild;oa=!(pa.hasChildNodes()&&c('CSS').hasClass(pa,ma));}if(!oa)return false;var qa=la.children[0],ra=la.children[1],sa="_4_ck";if(qa&&c('CSS').hasClass(qa,sa)||ra&&c('CSS').hasClass(ra,sa))return false;return true;};ha.prototype.$PubcontentFeedChainingControllerX31=function(la){if(!la)return true;var ma=c('DOM').scry(la,"._1xwr");if(ma.length)return true;return false;};ha.prototype.$PubcontentFeedChainingControllerX38=function(la,ma){var na=this.findStory(la);if(!this.$PubcontentFeedChainingControllerX47(na))return null;if(!this.$PubcontentFeedChainingControllerX48(ma))return null;this.$PubcontentFeedChainingControllerX49(na.id);if(ia(na)&&ma.chaining_type!=='contextual_recommendations')return null;var oa;if(!ma.continued_chaining){oa=this.findContainer(na);if(!oa)return null;var pa=c('DOM').create('div'),qa=c('DOM').appendContent(oa,pa);if(qa.length!==1)return null;}else{oa=na;pa=c('DOM').create('div');qa=c('DOM').insertAfter(oa,pa);c('DOM').remove(oa);if(qa.length!==1)return null;}if(ma.is_auto_expand){return {chainingWrapper:qa[0],story:na,is_auto_expand:ma.is_auto_expand};}else return {chainingWrapper:qa[0],story:na};};ha.prototype.$PubcontentFeedChainingControllerX28=function(la,ma){var na=this.$PubcontentFeedChainingControllerX38(la,ma);if(!na)return false;var oa=this.findStreamRoot(na.story);if(!oa)return false;var pa=oa.getAttribute('id'),qa=c('XFeedAdsChainingController').getURIBuilder().setString('actor_id',ma.actor_id).setString('origin',ma.origin).setString('ei',ma.client_token).setString('data_ownerid',pa);if(ma.ft_id)qa.setString('ft_id',ma.ft_id);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,na.story.id)).setRelativeTo(na.chainingWrapper).setURI(qa.getURI()).setAllowCrossPageTransition(true).send();return true;};ha.prototype.$PubcontentFeedChainingControllerX43=function(la,ma){if(!this.$PubcontentFeedChainingControllerX30(this.findStory(la)))return false;var na=this.$PubcontentFeedChainingControllerX38(la,ma);if(!na)return false;c('CSS').addClass(na.chainingWrapper,"_3lkn");var oa=null;if(ma.fbvideo_id){oa=c('XPubcontentRelatedVideoChainingController').getURIBuilder();oa.setInt('fbvideo_id',ma.fbvideo_id);}else{oa=c('XPubcontentRelatedShareChainingController').getURIBuilder();oa.setInt('global_share_id',ma.global_share_id);}oa.setString('attachment_div_id',c('getOrCreateDOMID')(ma.attachment));if(ma.link_url)oa.setString('link_url',ma.link_url);if(ma.video_div_id)oa.setString('video_div_id',ma.video_div_id);if(ma.share_id)oa.setString('share_id',ma.share_id);var pa=JSON.parse(c('DataAttributeUtils').getDataFt(na.story))||{};if('qid' in pa&&'mf_story_key' in pa){oa.setString('qid',pa.qid);oa.setString('mf_story_key',pa.mf_story_key);}if(ma.is_auto_expand){this.$PubcontentFeedChainingControllerX39(na.story.id);oa.setBool('is_auto_expand',ma.is_auto_expand);}var qa=new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,na.story.id)).setRelativeTo(na.chainingWrapper).setAllowCrossPageTransition(true).setURI(oa.getURI());pa&&qa.setData(pa);qa.send();return true;};ha.prototype.$PubcontentFeedChainingControllerX44=function(la,ma,na){if(!this.$PubcontentFeedChainingControllerX47(la))return null;this.$PubcontentFeedChainingControllerX49(la.id);var oa=c('XRelatedGamesChainingController').getURIBuilder().setInt('app_id',ma).setString('attachment_div_id',na);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,la.id)).setURI(oa.getURI()).setAllowCrossPageTransition(true).send();return true;};ha.prototype.$PubcontentFeedChainingControllerX29=function(la,ma){var na=this.$PubcontentFeedChainingControllerX38(la,ma);if(!na)return false;var oa=this.findStory(la),pa=c('XPubcontentFeedChainingController').getURIBuilder().setString('actor_id',ma.actor_id).setString('origin',ma.origin).setString('referrer',ma.referrer).setString('trigger',ma.trigger).setBool('is_home_request',this.$PubcontentFeedChainingControllerX40()).setBool('is_sponsored',ia(oa));if(ma.ft_id)pa.setString('ft_id',ma.ft_id);if(ma.content_id)pa.setString('content_id',ma.content_id);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,na.story.id)).setRelativeTo(na.chainingWrapper).setURI(pa.getURI()).setAllowCrossPageTransition(true).send();return true;};ha.prototype.$PubcontentFeedChainingControllerX36=function(la,ma){var na=this.$PubcontentFeedChainingControllerX38(la,ma);if(!na)return false;var oa=c('XEventRelatedEventsPivotController').getURIBuilder().setInt('event_id',ma.event_id).setString('attachment_id',c('getOrCreateDOMID')(la)).setString('trigger_action',ma.origin).getURI();new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,na.story.id)).setRelativeTo(na.chainingWrapper).setURI(oa).setAllowCrossPageTransition(true).send();return true;};ha.prototype.$PubcontentFeedChainingControllerX19=function(la,ma){return function(na,oa){var pa={origin:y};if(oa.storyid){pa.story_id=oa.storyid;}else{var qa=this.findStory(oa.attachment);if(!qa)return la;pa.ft_id=this.findFeedbackTargetId(qa);}return this.$PubcontentFeedChainingControllerX33(oa.attachment,pa,ma,function(){return la(na,oa);});}.bind(this);};ha.prototype.$PubcontentFeedChainingControllerX33=function(la,ma,na,oa){var pa=c('XLEDFollowUpFeedUnitController').getURIBuilder().setEnum('entry_point',na);if(ma.ft_id)pa=pa.setString('ft_id',ma.ft_id);if(ma.story_id)pa=pa.setString('story_id',ma.story_id);if(ma.place_id)pa=pa.setString('place_id',String(ma.place_id));var qa=this.$PubcontentFeedChainingControllerX38(la,ma);if(!qa){oa&&oa();return;}new (c('AsyncRequest'))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX39(qa.story.id);oa&&oa();}.bind(this)).setHandler(function(ra){if(!ra.payload.is_chained){this.$PubcontentFeedChainingControllerX39(qa.story.id);oa&&oa();}}.bind(this)).setRelativeTo(qa.chainingWrapper).setURI(pa.getURI()).setAllowCrossPageTransition(true).send();};ha.prototype.$PubcontentFeedChainingControllerX45=function(la,ma){var na=this.$PubcontentFeedChainingControllerX38(la,ma);if(!na)return false;var oa=c('XPubcontentCommerceProductChainingController').getURIBuilder().setString('attachment_id',c('getOrCreateDOMID')(la)).setInt('product_id',ma.product_id).getURI();new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,na.story.id)).setRelativeTo(na.chainingWrapper).setURI(oa).setAllowCrossPageTransition(true).send();return true;};ha.prototype.$PubcontentFeedChainingControllerX46=function(la,ma){var na=this.$PubcontentFeedChainingControllerX38(la,ma);if(!na)return false;var oa=c('XSearchRelatedPostsPivotController').getURIBuilder().setString('origin',ma.origin).setString('content_id',String(ma.content_id));new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,na.story.id)).setRelativeTo(na.chainingWrapper).setURI(oa.getURI()).setAllowCrossPageTransition(true).send();return true;};ha.prototype.$PubcontentFeedChainingControllerX37=function(la,ma){var na=this.$PubcontentFeedChainingControllerX38(la,ma);if(!na)return false;var oa=c('XPubcontentFeedCommentChainingController').getURIBuilder().setString('action_trigger',String(ma.action_trigger));if(ma.ft_id)oa.setString('ft_id',ma.ft_id);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,na.story.id)).setRelativeTo(na.chainingWrapper).setURI(oa.getURI()).setAllowCrossPageTransition(true).send();return true;};ha.prototype.$PubcontentFeedChainingControllerX32=function(la,ma){var na=this.$PubcontentFeedChainingControllerX38(la,ma);if(!na)return false;var oa=c('XPubcontentGroupRelatedStoriesChainingController').getURIBuilder().setInt('post_id',ma.post_id).setBool('is_home_request',this.$PubcontentFeedChainingControllerX40()).getURI();new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,na.story.id)).setRelativeTo(na.chainingWrapper).setURI(oa).setAllowCrossPageTransition(true).send();return true;};ha.prototype.findStory=function(la){var ma="^div._4-u2",na=c('DOM').scry(la,ma);return na.length===1?na[0]:null;};ha.prototype.findFeedbackTargetId=function(la){if(ka(la)){var ma=c('DOMQuery').scry(la,"input[name='ft_ent_identifier']"),na=ma.find(function(qa){return !ja(qa);});if(!na)return null;return na.value;}else if(ba){var oa=c('DOMQuery').scry(la,"input[name='ft_ent_identifier']")[0];if(!oa)return null;return oa.value;}else{var pa=c('DOMQuery').find(la,"input[name='ft_ent_identifier']");if(!pa)return null;return pa.value;}};ha.prototype.findAttachment=function(la){var ma="div._6m2",na="div.iframeEmbed",oa=c('DOM').scry(la,ma)[0]||c('DOM').scry(la,na)[0];return oa;};ha.prototype.findContainer=function(la){var ma=c('DOM').create('div'),na=c('DOM').insertAfter(la,ma);c('ContextualThing').register(ma,la);return na.length>=1?na[0]:null;};ha.prototype.findStreamRoot=function(la){var ma="^div._4ikz";return c('DOM').scry(la,ma)[0];};ha.prototype.findAdClientToken=function(la){var ma=this.findStory(la);if(!ma)return null;var na=c('DataAttributeUtils').getDataFt(ma);if(!na)return null;var oa=JSON.parse(na);return oa[ha.getAdClientTokenIndex()];};ha.prototype.shouldPuntGroupChaining=function(la){var ma="^._4ruh";return c('DOM').scry(la,ma).length>=1;};ha.prototype.$PubcontentFeedChainingControllerX40=function(){var la=c('URI').getRequestURI(false);return la.getPath()==='/'||la.getPath()==='/home.php';};function ia(la){if(fa&&ga){return c('DOM').scry(la,fa).length>0&&c('DOM').scry(la,ga).length===0;}else return c('DOM').scry(la,"._5paw").length>0&&c('DOM').scry(la,"._14zs").length===0;}function ja(la){return !!la&&(c('CSS').matchesSelector(la,ca)||!!c('Parent').bySelector(la,ca));}function ka(la){return !!la&&c('DOM').scry(la,ca).length>0;}f.exports=ha;}),null);